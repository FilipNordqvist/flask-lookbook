{% extends "layout.html" %}
{% block title %}Inspiration{% endblock %}
{% block content %}
<h1>Inspiration</h1>

<!-- Image Gallery -->
<div class="container text-center">
  {% if images %}
    <!-- Display images in a responsive grid -->
    <!-- Bootstrap's row/col system automatically adjusts based on screen size -->
    <div class="row g-3">
      {% for image in images %}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <div class="card h-100">
            <img 
              src="{{ image.url }}" 
              class="card-img-top gallery-img" 
              alt="{{ image.alt_text or image.filename }}"
              style="object-fit: cover; height: 250px; cursor: pointer;"
              data-bs-toggle="modal" 
              data-bs-target="#imageModal"
              data-image-url="{{ image.url }}"
              data-image-alt="{{ image.alt_text or image.filename }}"
            >
            {% if image.alt_text %}
              <div class="card-body p-2">
                <p class="card-text small text-muted">{{ image.alt_text }}</p>
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <!-- Show message if no images are available -->
    <div class="alert alert-info">
      <p class="mb-0">No images available yet. Check back soon!</p>
    </div>
  {% endif %}
</div>

<!-- Modal for full-size image view -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="imageModalLabel">Image Preview</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-0">
        <img src="" id="modalImage" class="w-100" alt="Large view" style="display: block;">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript for modal image display -->
<script>
  // Get all gallery images and the modal image element
  const galleryImages = document.querySelectorAll('.gallery-img');
  const modalImage = document.getElementById('modalImage');
  const modalTitle = document.getElementById('imageModalLabel');

  // Add click event listener to each gallery image
  galleryImages.forEach(img => {
    img.addEventListener('click', () => {
      // Get the image URL and alt text from data attributes
      const imageUrl = img.getAttribute('data-image-url');
      const imageAlt = img.getAttribute('data-image-alt');
      
      // Set the modal image source and alt text
      modalImage.src = imageUrl;
      modalImage.alt = imageAlt;
      modalTitle.textContent = imageAlt;
    });
  });
</script>

{% endblock %}
